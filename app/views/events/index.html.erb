<div class="container-fluid" style="padding-top: 20px; padding-left: 30px">
  <h1>Events</h1>

  <table class="table table-borderless table-hover">
    Click event to add your name to the guest list.
    <thead >
      <tr>
        <th scope="col">Photo</th>
        <th scope="col">Name</th>
        <th scope="col">Description</th>
        <th scope="col">Date</th>
        <th scope="col">Location</th>
        <th scope="col">Tickets</th>
        <th scope="col">Price</th>
        <th scope="col">Guests</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @events.each do |event| %>
        <tr>
          <td><%= image_tag event.image.thumb %></td>
          <td><%= event.name %></td>
          <td><%= event.description %></td>
          <td><%= event.date %></td>
          <td><%= event.location %></td>
          <td><%= event.has_tickets %></td>
          <td>$<%= number_with_precision(event.price, precision: 2) %></td>
          <td><% event.guests.each do |guest| %>
                <%= guest.firstname %> <%= guest.lastname%>,
              <% end %>
          </td>
          <td>
          <%= link_to 'http://www.facebook.com/sharer.php?u='+request.fullpath, :target => :blank do %>
            <i class="fab fa-facebook-square text-primary"></i>
          <% end %>
          <%= link_to 'Attend', new_event_guest_path(event), id: "rsvp_#{event.id}" %>
          <%= link_to 'Show', event, id: "event_#{event.id}" %>
          <%= link_to 'Edit', edit_event_path(event) if admin_signed_in? %>
          <%= link_to 'Destroy', event, method: :delete, data: { confirm: 'Are you sure?' } if admin_signed_in? %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>

  <%= link_to 'New Event', new_event_path, class: "btn btn-primary text-white" if admin_signed_in? %> <%= link_to 'Past Events', past_events_path, class: "btn btn-primary text-white" %>
  <%= link_to 'Back', root_path, class: "btn btn-secondary text-white" %>
</div>
